:root {
  --font-main: 'JetBrains Mono', 'Fira Code', 'IBM Plex Mono', ui-monospace, monospace;
  --space-1: 6px;
  --space-2: 10px;
  --space-3: 14px;
  --space-4: 18px;
  --space-5: 24px;
  --radius: 12px;
  --bg: #060913;
  --bg-overlay: radial-gradient(circle at 20% 10%, rgba(102, 126, 234, 0.14), transparent 45%), radial-gradient(circle at 85% 20%, rgba(34, 211, 238, 0.1), transparent 35%), radial-gradient(circle at 50% 100%, rgba(168, 85, 247, 0.12), transparent 40%);
  --text: #d7e3ff;
  --muted: #8ea0c8;
  --panel: rgba(16, 24, 44, 0.68);
  --panel-border: rgba(141, 165, 217, 0.2);
  --accent: #8b5cf6;
  --accent-alt: #43f3d0;
  --line: rgba(142, 160, 200, 0.24);
  --halo: 0 0 0 1px rgba(139, 92, 246, 0.4), 0 0 34px rgba(67, 243, 208, 0.2);
}

:root[data-theme='light'] {
  --bg: #eaf1ff;
  --bg-overlay: radial-gradient(circle at 20% 10%, rgba(76, 92, 173, 0.15), transparent 45%), radial-gradient(circle at 85% 20%, rgba(1, 132, 160, 0.12), transparent 35%), radial-gradient(circle at 50% 100%, rgba(126, 34, 206, 0.08), transparent 40%);
  --text: #172034;
  --muted: #4f5f80;
  --panel: rgba(255, 255, 255, 0.66);
  --panel-border: rgba(46, 65, 105, 0.2);
  --line: rgba(70, 94, 149, 0.2);
}

* { box-sizing: border-box; }
body {
  margin: 0;
  min-width: 1200px;
  min-height: 100vh;
  color: var(--text);
  background: var(--bg-overlay), var(--bg);
  font-family: var(--font-main);
  letter-spacing: 0.01em;
}

body::before {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0.07;
  background-image: radial-gradient(circle, rgba(255, 255, 255, 0.5) 0.8px, transparent 1px);
  background-size: 3px 3px;
}

#root { min-height: 100vh; }

.layout { position: relative; display: grid; grid-template-columns: 260px 1fr; min-height: 100vh; overflow: hidden; }
.sidebar, .page, .panel, .palette, .inspector {
  background: var(--panel);
  border: 1px solid var(--panel-border);
  border-radius: var(--radius);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.sidebar { margin: var(--space-4); padding: var(--space-5) var(--space-4); height: calc(100vh - 2 * var(--space-4)); position: sticky; top: var(--space-4); }
.sidebar h2 { margin: 0 0 var(--space-3); text-transform: uppercase; letter-spacing: 0.12em; }
.sidebar nav { display: grid; gap: var(--space-1); }
.nav-link { display: block; padding: var(--space-2) var(--space-3); border-radius: 10px; color: var(--text); text-decoration: none; border: 1px solid transparent; }
.nav-link:hover { border-color: var(--panel-border); }
.nav-link--active { background: rgba(139, 92, 246, 0.18); border-color: rgba(139, 92, 246, 0.4); box-shadow: var(--halo); }

.content { padding: var(--space-4); overflow: auto; }
.page { padding: var(--space-4); text-align: left; display: grid; gap: var(--space-3); }
.page h1, .page h2, .page h3 { margin: 0; }
p { margin: 0; color: var(--muted); }

.gate { min-height: 100vh; display: grid; place-content: center; text-align: center; padding: var(--space-5); }

.form-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); column-gap: var(--space-3); row-gap: var(--space-2); margin-bottom: var(--space-3); }
.metric-control { display: grid; gap: var(--space-1); text-align: left; align-content: start; border: 1px solid var(--line); border-radius: 10px; padding: var(--space-2); background: rgba(2, 6, 23, 0.6); color: var(--text); }
.metric-control__head { display: flex; align-items: center; justify-content: space-between; font-weight: 600; }
.metric-control__unit { color: var(--accent-alt); font-size: 12px; }
.metric-control__scale { display: flex; justify-content: space-between; color: var(--muted); font-size: 11px; }

input, select, textarea {
  width: auto;
  max-width: 100%;
  padding: 6px 8px;
  border-radius: 8px;
  border: 1px solid var(--line);
  background: rgba(7, 12, 27, 0.8);
  color: var(--text);
  font-family: inherit;
}

.settings-actions, .save-row { display: flex; align-items: center; gap: var(--space-2); flex-wrap: wrap; }
.button, .save-button, button { position: relative; background: rgba(139, 92, 246, 0.2); color: var(--text); border: 1px solid rgba(139, 92, 246, 0.45); border-radius: 10px; padding: 8px 14px; cursor: pointer; font-family: inherit; }
.button:hover, .save-button:hover, button:hover { box-shadow: var(--halo); }
.save-button:disabled { opacity: 0.65; cursor: wait; }
.button-spark {
  position: absolute;
  inset: 50%;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  pointer-events: none;
  background: radial-gradient(circle, rgba(67, 243, 208, 0.95) 0%, rgba(139, 92, 246, 0) 70%);
  transform: translate(-50%, -50%);
  animation: spark-burst 460ms ease-out;
}

.table { width: 100%; border-collapse: collapse; margin-top: var(--space-2); font-size: 13px; }
.table th, .table td { border: 1px solid var(--line); padding: 8px; text-align: left; vertical-align: top; }
.table--dense { font-size: 12px; }

.filters { display: flex; gap: var(--space-2); flex-wrap: wrap; align-items: center; }
.filter-button { border: 1px solid var(--line); background: rgba(31, 41, 69, 0.6); color: var(--text); }
.filter-button--active { background: rgba(139, 92, 246, 0.25); border-color: rgba(139, 92, 246, 0.5); }
.import-label { border: 1px solid var(--line); border-radius: 8px; padding: 8px 12px; cursor: pointer; }
.import-label input { display: none; }

.summary-grid, .metric-cards { display: grid; gap: var(--space-2); }
.metric-cards { grid-template-columns: repeat(2, minmax(0, 1fr)); }
.summary-card, .metric-card, .signal { border: 1px solid var(--line); border-radius: 10px; padding: var(--space-2); background: rgba(12, 18, 35, 0.44); }

.sparkline { width: 100%; height: 40px; color: var(--accent-alt); }
.palette-backdrop { position: fixed; inset: 0; background: rgba(2, 6, 23, .6); display: grid; place-items: start center; padding-top: 10vh; z-index: 50; }
.palette { width: 560px; padding: var(--space-3); display: grid; gap: var(--space-2); }

.graph-layout { display: grid; grid-template-columns: 1fr 340px; gap: var(--space-3); align-items: start; }
.graph-filters { margin-bottom: var(--space-2); }
.inspector { padding: var(--space-3); position: sticky; top: var(--space-3); }
.preset-row { display: flex; gap: var(--space-1); margin: var(--space-2) 0; flex-wrap: wrap; }
.row-active { background: rgba(67, 243, 208, 0.16); }
.mode-tabs { display: flex; gap: var(--space-2); margin-bottom: var(--space-2); }
.heat-cell { width: 100%; border: 0; border-radius: 4px; padding: 4px; color: #fff; }
.graph-canvas { width: 100%; height: 420px; border: 1px solid var(--line); border-radius: 10px; background: rgba(3, 8, 22, 0.7); }

.oracle-grid { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: var(--space-2); margin-bottom: var(--space-3); }
.metric-tags { display: flex; gap: var(--space-1); flex-wrap: wrap; margin-bottom: var(--space-2); }

.cockpit-strip { position: sticky; top: 0; z-index: 10; display: grid; grid-template-columns: repeat(5, minmax(0, 1fr)); gap: var(--space-1); border-radius: 10px; padding: var(--space-2); margin-bottom: var(--space-3); background: rgba(5, 10, 27, 0.78); border: 1px solid var(--line); }
.cockpit-strip article { display: grid; gap: 4px; }
.cockpit-strip span { font-size: 11px; color: var(--muted); }

.starfield {
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0.22;
  z-index: 0;
  color: #e2f0ff;
  animation: star-drift 140s linear infinite;
}
.starfield svg { width: 100%; height: 100%; }

.layout > *:not(.starfield) { position: relative; z-index: 1; }

.panel:focus-within { animation: halo-pulse 1.8s ease-in-out infinite; }
.chip { border-radius: 999px; font-size: 12px; padding: 6px 10px; background: rgba(67, 243, 208, 0.15); border: 1px solid rgba(67, 243, 208, 0.4); }
.empty-state { padding: var(--space-5); gap: var(--space-3); }
.settings-panel { padding: var(--space-3); }
.settings-appearance { display: flex; gap: var(--space-3); flex-wrap: wrap; }

@keyframes star-drift {
  from { transform: translate3d(0, 0, 0); }
  to { transform: translate3d(-3%, 2%, 0); }
}

@keyframes spark-burst {
  from { opacity: 0.9; transform: translate(-50%, -50%) scale(0.5); }
  to { opacity: 0; transform: translate(-50%, -50%) scale(8); }
}

@keyframes halo-pulse {
  0%, 100% { box-shadow: none; }
  50% { box-shadow: var(--halo); }
}

:root[data-motion='reduced'] * {
  animation: none !important;
  transition: none !important;
  scroll-behavior: auto !important;
}

@media (prefers-reduced-motion: reduce) {
  :root:not([data-motion='normal']) * {
    animation: none !important;
    transition: none !important;
    scroll-behavior: auto !important;
  }
}
